(()=>{function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n,t;n=jQuery,t=function(){function t(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.$scroller=e,this.initialize()}var i,r;return i=t,(r=[{key:"getQueryArgs",value:function(){return this.$scroller.data("query")}},{key:"goNext",value:function(){if(!this.loading){var e=this,t=e.getQueryArgs(),i={query:t};e.setLoading(),fetch("".concat(genInfiniteScroll.homeurl,"/wp-json/gen/v1/post/html"),{method:"POST",body:JSON.stringify(i,(function(e,n){return void 0===n?null:n})),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(i){if(i.post){var r=n(n.parseHTML(i.content)).find(".post-content");r.css("display","none"),r.appendTo(e.$scroller.children(".list")),r.slideDown(),t.post__not_in.push(i.post.ID),e.$scroller.data("query",t),e.removeLoading(),1==i.found_posts&&e.end()}else e.end()}))}}},{key:"setLoading",value:function(){this.loading=!0,this.getSpinner().slideDown(),this.getTrigger().slideUp()}},{key:"removeLoading",value:function(){this.loading=!1,this.getTrigger().slideDown(),this.getSpinner().slideUp()}},{key:"getSpinner",value:function(){return this.$scroller.children(".states").find(".spinner")}},{key:"getTrigger",value:function(){return this.$scroller.children(".controls").children(this.$scroller.data("trigger"))}},{key:"end",value:function(){this.finished=!0,this.getTrigger().stop().slideUp(),this.getSpinner().stop().slideUp()}},{key:"initialize",value:function(){var e=this;e.getTrigger().click((function(){e.goNext()}))}}])&&e(i.prototype,r),t}(),n(document).ready((function(){n(".gen-infinite-scroll").each((function(){new t(n(this))}))}))})();